"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6921],{99930:function(e,l,t){var a=t(85893),i=t(67294);let n=e=>{let{image:l,setImage:t}=e,[n,s]=(0,i.useState)(null),o=e=>{let l=e.target.files?e.target.files[0]:null;if(l&&l.type.startsWith("image/")?t(l):t(null),l){let a=new FileReader;a.onloadend=()=>{s(a.result)},a.readAsDataURL(l)}else s(null)};return(0,a.jsxs)("div",{className:"mx-auto p-4 flex flex-col justify-center items-center",children:[n&&(0,a.jsx)("img",{src:n,alt:"Preview",className:"mt-4 w-24 h-24 object-cover border rounded shadow my-3"}),(0,a.jsx)("input",{type:"file",onChange:o,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100"})]})};l.Z=n},46921:function(e,l,t){t.r(l);var a=t(85893),i=t(67294),n=t(99930),s=t(49443),o=t(9473),c=t(12627),r=t(55331),u=t(8303),d=t(76649),_=t(52481);let p=e=>{let{id:l}=e,t=(0,o.I0)(),{units:p}=(0,o.v9)(e=>e.unit),{code:m}=(0,o.v9)(e=>e.util),{loading:h,rawProductDetail:f}=(0,o.v9)(e=>e.rawProduct),{token:b}=(0,o.v9)(e=>e.user),[x,g]=(0,i.useState)(null),[v,j]=(0,i.useState)({item_code:"",title:"",unit_id:"",sub_unit_id:"",purchase_description:"",value_per_unit:"",valuation_method:"",min_stock_level:"",opening_stock:0,opening_stock_unit_balance:0,opening_stock_total_balance:0,sale_description:"",image:null}),[k,N]=(0,i.useState)([]),[S,E]=(0,i.useState)([]),[y,C]=(0,i.useState)([{value:"",label:"Select Valuation Method"},{value:"LIFO",label:"LIFO"},{value:"FIFO",label:"FIFO"},{value:"Average",label:"Average"}]),[w,O]=(0,i.useState)([{value:"",label:"Select Product Type"},{value:"empty",label:"Empty"},{value:"material",label:"Material"}]),R=e=>{let{name:l,value:t}=e.target;j(e=>{let a={...e,[l]:t};if("opening_stock"===l){let i=parseInt(t,10);a.opening_stock_total_balance=i*e.opening_stock_unit_balance}else if("opening_stock_unit_balance"===l){let n=parseFloat(t);a.opening_stock_total_balance=e.opening_stock*n}else if("opening_stock_total_balance"===l){let s=parseFloat(t);a.opening_stock_unit_balance=e.opening_stock?s/e.opening_stock:0}return a})},F=e=>{e.preventDefault(),v.image=x,(0,u.uB)(b),(0,u.OG)("multipart/form-data"),l||t((0,r.LU)(v))},I=()=>{t((0,c.rY)())};(0,i.useEffect)(()=>{I(),t((0,r.xz)()),t((0,d.ge)()),t((0,d.bB)(_.q.RAW_MATERIAL)),l&&t((0,r.RP)(l))},[]),(0,i.useEffect)(()=>{f&&j({...v,item_code:f.item_code,title:f.title,unit_id:f.unit_id,sub_unit_id:f.sub_unit_id,purchase_description:f.purchase_description,value_per_unit:f.value_per_unit,valuation_method:f.valuation_method,min_stock_level:f.min_stock_level,opening_stock:f.opening_stock,opening_stock_unit_balance:f.opening_stock_unit_balance,opening_stock_total_balance:f.opening_stock_total_balance,sale_description:f.sale_description})},[f]);let U=e=>{"empty"===e.value?j(e=>({...e,item_code:"EM-"+m})):j(e=>({...e,item_code:"RM-"+m}))};return(0,i.useEffect)(()=>{let e=["BAG","DRUM","GLN","QTY","NUMBER","BOTTLE"],l=["KG","LTR","GRM"];if(p){let t=p.filter(l=>e.includes(l.label)),a=p.filter(e=>l.includes(e.label));N(t),E(a)}},[p]),(0,a.jsxs)("form",{className:"space-y-5",onSubmit:F,children:[(0,a.jsx)("div",{className:"flex justify-center items-center",children:(0,a.jsx)(n.Z,{image:x,setImage:g})}),(0,a.jsxs)("div",{className:"flex justify-start flex-col items-start space-y-3",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-center items-center gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"unit_id",children:"Product Type"}),(0,a.jsx)(s.default,{defaultValue:w[0],options:w,isSearchable:!0,isClearable:!0,placeholder:"Select Product Type",onChange:e=>U(e)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"item_code",children:"Item Code"}),(0,a.jsx)("input",{id:"item_code",type:"text",name:"item_code",placeholder:"Enter Item code",value:v.item_code,onChange:R,disabled:!0,className:"form-input"})]})]}),(0,a.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,a.jsx)("label",{htmlFor:"title",children:"Item Title"}),(0,a.jsx)("input",{id:"title",type:"text",name:"title",placeholder:"Enter Item TItle",value:v.title,onChange:R,className:"form-input",style:{height:45}})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center flex-col md:flex-row gap-3",children:[(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("label",{htmlFor:"unit_id",children:"Unit"}),(0,a.jsx)(s.default,{defaultValue:k[0],options:k,isSearchable:!0,isClearable:!0,placeholder:"Select Unit",onChange:e=>{j({...v,unit_id:e?e.value:""})}})]}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("label",{htmlFor:"sub_unit_id",children:"Sub Unit"}),(0,a.jsx)(s.default,{defaultValue:S[0],options:S,isSearchable:!0,isClearable:!0,placeholder:"Select Sub Unit",onChange:e=>{j({...v,sub_unit_id:e?e.value:""})}})]}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("label",{htmlFor:"value_per_unit",children:"Value per Unit (According to sub unit)"}),(0,a.jsx)("input",{id:"value_per_unit",type:"number",name:"value_per_unit",placeholder:"Enter weight per main unit",value:v.value_per_unit,onChange:R,className:"form-input"})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center flex-col md:flex-row gap-3",children:[(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("label",{htmlFor:"min_stock_level",children:"Min Stock Level (Main Unit)"}),(0,a.jsx)("input",{id:"min_stock_level",type:"number",name:"min_stock_level",placeholder:"Set min stock level",value:v.min_stock_level,onChange:R,className:"form-input"})]}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("label",{htmlFor:"opening_stock",children:"Opening Stock Count (Sub Unit)"}),(0,a.jsx)("input",{id:"opening_stock",type:"number",name:"opening_stock",placeholder:"Enter Opening Stock Count",value:v.opening_stock,onChange:R,className:"form-input"})]}),(0,a.jsxs)("div",{className:"w-full flex justify-between items-center flex-col md:flex-row gap-3",children:[(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("label",{htmlFor:"opening_stock_balance",children:"Opening Per Sub Unit Price"}),(0,a.jsx)("input",{id:"opening_stock_unit_price",type:"number",name:"opening_stock_unit_price",placeholder:"Enter Opening Stock Unit Balance",value:v.opening_stock_unit_balance,onChange:R,className:"form-input"})]}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("label",{htmlFor:"opening_stock_balance",children:"Opening Stock Total Balance"}),(0,a.jsx)("input",{id:"opening_stock_total_balance",type:"number",name:"opening_stock_total_balance",placeholder:"Enter Opening Stock Total Balance",value:v.opening_stock_total_balance,onChange:R,className:"form-input"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"valuation_method",children:"Valuation Method"}),(0,a.jsx)(s.default,{defaultValue:y[0],options:y,isSearchable:!0,isClearable:!0,placeholder:"Select Valuation Method",onChange:e=>{j({...v,valuation_method:e?e.value:""})}})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"purchase_description",children:"Purchase Description"}),(0,a.jsx)("textarea",{id:"purchase_description",rows:3,name:"purchase_description",className:"form-textarea",onChange:R,placeholder:"Enter description for purchase",defaultValue:v.purchase_description})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"sale_description",children:"Sale Description"}),(0,a.jsx)("textarea",{id:"sale_description",rows:3,name:"sale_description",className:"form-textarea",onChange:R,placeholder:"Enter descriptin for sales",defaultValue:v.sale_description})]})]}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary !mt-6",disabled:h,children:h?"Loading...":"Create"})]})};l.default=p},52481:function(e,l,t){var a,i;t.d(l,{q:function(){return a}}),(i=a||(a={})).VENDOR="vendor",i.PURCHASE_REQUISITION="purchase-requisition",i.LOCAL_PURCHASE_ORDER="local-purchase-order",i.GOOD_RECEIVE_NOTE="good-receive-note",i.VENDOR_BILL="vendor-bill",i.PRODUCTION="production",i.PRODUCT_ASSEMBLY="product-assembly",i.EMPLOYEE="employee",i.CUSTOMER="customer",i.RAW_MATERIAL="raw-material"}}]);