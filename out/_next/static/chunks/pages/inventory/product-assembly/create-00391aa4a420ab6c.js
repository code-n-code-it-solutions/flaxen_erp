(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5845],{7955:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/inventory/product-assembly/create",function(){return l(43605)}])},99930:function(e,t,l){"use strict";var s=l(85893),a=l(67294);let r=e=>{let{image:t,setImage:l}=e,[r,n]=(0,a.useState)(null),o=e=>{let t=e.target.files?e.target.files[0]:null;if(t&&t.type.startsWith("image/")?l(t):l(null),t){let s=new FileReader;s.onloadend=()=>{n(s.result)},s.readAsDataURL(t)}else n(null)};return(0,s.jsxs)("div",{className:"mx-auto p-4 flex flex-col justify-center items-center",children:[r&&(0,s.jsx)("img",{src:r,alt:"Preview",className:"mt-4 w-24 h-24 object-cover border rounded shadow my-3"}),(0,s.jsx)("input",{type:"file",onChange:o,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100"})]})};t.Z=r},43605:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return k}});var s=l(85893),a=l(67294),r=l(84800),n=l(41664),o=l.n(n),i=l(5152),d=l.n(i),c=l(9473),u=l(11163),m=l(94300),h=l(8303),x=l(72253),f=l(63549),p=l(75694),j=l(29996),b=l(11355),v=l(31484),C=l(99930);let y=e=>{let{colorCodeModal:t,setColorCodeModal:l,handleAddNewCode:r,modalFormData:n}=e,[o,i]=(0,a.useState)(null),[d,c]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[h,x]=(0,a.useState)(0);return(0,a.useEffect)(()=>{t&&(c(""),m(""),x(""),i(null))},[t]),(0,s.jsx)(b.u,{appear:!0,show:t,as:a.Fragment,children:(0,s.jsxs)(v.V,{as:"div",open:t,onClose:()=>l(!1),children:[(0,s.jsx)(b.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,s.jsx)("div",{className:"fixed inset-0"})}),(0,s.jsx)("div",{className:"fixed inset-0 z-[999] overflow-y-auto bg-[black]/60",children:(0,s.jsx)("div",{className:"flex min-h-screen items-start justify-center px-4",children:(0,s.jsx)(b.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,s.jsxs)(v.V.Panel,{as:"div",className:"panel my-8 w-full max-w-lg overflow-hidden rounded-lg border-0 p-0 text-black dark:text-white-dark",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between bg-[#fbfbfb] px-5 py-3 dark:bg-[#121c2c]",children:[(0,s.jsxs)("div",{className:"text-lg font-bold",children:[n?"Edit":"Add"," Color Code"]}),(0,s.jsx)("button",{type:"button",className:"text-white-dark hover:text-dark",onClick:()=>l(!1),children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,s.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,s.jsxs)("div",{className:"p-5 space-y-5",children:[(0,s.jsx)("div",{className:"flex justify-center items-center",children:(0,s.jsx)(C.Z,{image:o,setImage:i})}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("label",{htmlFor:"code",children:"Code"}),(0,s.jsx)("input",{type:"text",name:"code",className:"form-input",placeholder:"e.g. FSG-001",value:d,onChange:e=>c(e.target.value)})]}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("label",{htmlFor:"name",children:"Name"}),(0,s.jsx)("input",{type:"text",name:"name",className:"form-input",placeholder:"e.g. Red",value:h,onChange:e=>x(e.target.value)})]}),(0,s.jsxs)("div",{className:"w-full flex justify-center items-end",children:[(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("label",{htmlFor:"hex_code",children:"Hex Code (Optional)"}),(0,s.jsx)("input",{type:"text",name:"hex_code",className:"form-input",placeholder:"e.g. #FF0000",value:u,onChange:e=>m(e.target.value)})]}),(0,s.jsx)("span",{className:"p-5 rounded shadow border",style:{backgroundColor:"".concat(u)}})]}),(0,s.jsxs)("div",{className:"mt-8 flex items-center justify-end",children:[(0,s.jsx)("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>l(!1),children:"Discard"}),(0,s.jsx)("button",{type:"button",className:"btn btn-primary ltr:ml-4 rtl:mr-4",onClick:()=>r({image:o,code:d,name:h,hex_code:u}),children:n?"Update":"Add"})]})]})]})})})})]})})};var g=l(76649),w=l(52481);let N=d()(()=>Promise.resolve().then(l.bind(l,49443)),{loadableGenerated:{webpack:()=>[49443]},ssr:!1}),_=()=>{let e=(0,c.I0)(),t=(0,u.useRouter)(),{token:l}=(0,c.v9)(e=>e.user),{allProductCategory:n}=(0,c.v9)(e=>e.productCategory),{code:i}=(0,c.v9)(e=>e.util),d=(0,c.v9)(e=>e.colorCode),{productAssembly:b,success:v}=(0,c.v9)(e=>e.productAssembly),[C,_]=(0,a.useState)(""),[k,E]=(0,a.useState)(""),[S,L]=(0,a.useState)(""),[F,A]=(0,a.useState)(""),[R,O]=(0,a.useState)(!1),[M,P]=(0,a.useState)(!1),[T,B]=(0,a.useState)([]),[D,I]=(0,a.useState)([]),[q,U]=(0,a.useState)([]),[W,H]=(0,a.useState)(0),[V,Z]=(0,a.useState)(0),G=e=>{B(t=>[...t,e]),O(!1)},Q=e=>{B(T.filter(t=>t.id!==e))},Y=t=>{t.preventDefault();let s=T.map(e=>({raw_product_id:e.raw_product_id,unit_id:e.unit_id,quantity:e.quantity,unit_price:e.quantity*e.unit_price,total:e.total})),a={formula_name:C,formula_code:k,category_id:parseInt(S),color_code_id:parseInt(F),raw_products:s};(0,h.uB)(l),e((0,p.f0)()),e((0,p.tD)(a))},K=t=>{e((0,j.hr)(t))};return(0,a.useEffect)(()=>{(0,h.uB)(l),e((0,m.Iw)("Create Product Assembly")),e((0,g.ge)()),e((0,x.dB)()),e((0,j.mK)()),e((0,g.bB)(w.q.PRODUCT_ASSEMBLY))},[]),(0,a.useEffect)(()=>{i&&E(i)},[i]),(0,a.useEffect)(()=>{b&&v&&(e((0,p.f0)()),t.push("/inventory/product-assembly"))},[b,v]),(0,a.useEffect)(()=>{d.colorCode&&d.success&&(P(!1),e((0,j.mK)()))},[d.colorCode,v]),(0,a.useEffect)(()=>{n&&I([{value:"",label:"Select Category"},...n.map(e=>({value:e.id,label:e.name}))])},[n]),(0,a.useEffect)(()=>{d.allColorCodes&&U([{value:"",label:"Select Color Code"},...d.allColorCodes.map(e=>{let t="".concat(e.name," - ").concat(e.hex_code," (").concat(e.code,")");return{value:e.id,label:t,colorCode:e.hex_code}})])},[d.allColorCodes]),(0,a.useEffect)(()=>{let e=T.reduce((e,t)=>e+ +t.quantity,0);H(e=isNaN(e)?0:e.toFixed(2))},[T]),(0,a.useEffect)(()=>{let e=T.reduce((e,t)=>e+ +t.quantity*t.unit_price,0);Z(e=isNaN(e)?0:e.toFixed(2))},[T]),(0,s.jsxs)("div",{children:[(0,s.jsx)(r.Z,{items:[{title:"Home",href:"/main"},{title:"All Product Assemblies",href:"/inventory/product-assembly"},{title:"Create New",href:"#"}]}),(0,s.jsx)("div",{className:"pt-5",children:(0,s.jsxs)("div",{className:"panel",children:[(0,s.jsxs)("div",{className:"mb-5 flex items-center justify-between",children:[(0,s.jsx)("h5",{className:"text-lg font-semibold dark:text-white-light",children:"Enter Details of Assembly"}),(0,s.jsx)(o(),{href:"/inventory/product-assembly",className:"btn btn-primary btn-sm m-1",children:(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ltr:mr-2 rtl:ml-2",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,s.jsx)("path",{d:"M15 5L9 12L15 19",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]})})]}),(0,s.jsxs)("form",{className:"space-y-5",onSubmit:Y,children:[(0,s.jsxs)("div",{className:"flex justify-start flex-col items-start space-y-3 w-full md:w-1/2",children:[(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("label",{htmlFor:"formula_name",children:"Formula Name"}),(0,s.jsx)("input",{id:"formula_name",type:"text",name:"formula_name",placeholder:"Enter Formula Name",value:C,onChange:e=>_(e.target.value),className:"form-input"})]}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("label",{htmlFor:"formula_code",children:"Formula Code"}),(0,s.jsx)("input",{id:"formula_code",type:"text",name:"formula_code",placeholder:"Enter Formula Code",disabled:!0,value:k,onChange:e=>E(e.target.value),className:"form-input"})]}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("label",{htmlFor:"category_id",children:"Category"}),(0,s.jsx)(N,{defaultValue:D[0],options:D,isSearchable:!0,isClearable:!0,placeholder:"Select Category",onChange:e=>L(e?e.value:"")})]}),(0,s.jsxs)("div",{className:"w-full flex justify-center items-end gap-2",children:[(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("label",{htmlFor:"category_id",children:"Color Code"}),(0,s.jsx)(N,{defaultValue:q[0],options:q,isSearchable:!0,isClearable:!0,styles:{option:(e,t)=>({...e,backgroundColor:t.data.colorCode,color:"black",padding:20})},placeholder:"Select Color Code",onChange:e=>A(e?e.value:"")})]}),(0,s.jsx)("button",{type:"button",className:"btn btn-primary btn-sm flex justify-center items-center",onClick:()=>P(!0),children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"h-5 w-5 ltr:mr-2 rtl:ml-2",fill:"none",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"1.5"}),(0,s.jsx)("path",{d:"M15 12L12 12M12 12L9 12M12 12L12 9M12 12L12 15",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex justify-end items-center mb-3",children:(0,s.jsx)("button",{type:"button",onClick:()=>O(!0),className:"btn btn-primary btn-sm",children:"Add Row"})}),(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Product"}),(0,s.jsx)("th",{children:"Unit"}),(0,s.jsx)("th",{children:"Qty"}),(0,s.jsx)("th",{children:"Cost"}),(0,s.jsx)("th",{children:"Action"})]})}),(0,s.jsxs)("tbody",{children:[T.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.raw_product_title}),(0,s.jsx)("td",{children:e.unit_title}),(0,s.jsx)("td",{children:e.quantity}),(0,s.jsx)("td",{children:(e.unit_price*e.quantity).toFixed(2)}),(0,s.jsx)("td",{children:(0,s.jsx)("button",{onClick:()=>Q(e.id),className:"btn btn-danger btn-sm",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,s.jsx)("path",{d:"M20.5001 6H3.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,s.jsx)("path",{d:"M18.8332 8.5L18.3732 15.3991C18.1962 18.054 18.1077 19.3815 17.2427 20.1907C16.3777 21 15.0473 21 12.3865 21H11.6132C8.95235 21 7.62195 21 6.75694 20.1907C5.89194 19.3815 5.80344 18.054 5.62644 15.3991L5.1665 8.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,s.jsx)("path",{d:"M6.5 6C6.55588 6 6.58382 6 6.60915 5.99936C7.43259 5.97849 8.15902 5.45491 8.43922 4.68032C8.44784 4.65649 8.45667 4.62999 8.47434 4.57697L8.57143 4.28571C8.65431 4.03708 8.69575 3.91276 8.75071 3.8072C8.97001 3.38607 9.37574 3.09364 9.84461 3.01877C9.96213 3 10.0932 3 10.3553 3H13.6447C13.9068 3 14.0379 3 14.1554 3.01877C14.6243 3.09364 15.03 3.38607 15.2493 3.8072C15.3043 3.91276 15.3457 4.03708 15.4286 4.28571L15.5257 4.57697C15.5433 4.62992 15.5522 4.65651 15.5608 4.68032C15.841 5.45491 16.5674 5.97849 17.3909 5.99936C17.4162 6 17.4441 6 17.5 6",stroke:"currentColor",strokeWidth:"1.5"})]})})})]},e.id)),T.length>0&&(0,s.jsxs)("tr",{className:"bg-gray-100",children:[(0,s.jsx)("td",{}),(0,s.jsx)("td",{children:"Total Quantity"}),(0,s.jsx)("td",{children:W}),(0,s.jsx)("td",{children:V}),(0,s.jsx)("td",{})]})]})]})]}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary !mt-6",children:"Submit"})]}),(0,s.jsx)(f.Z,{modal:R,setModal:O,handleAddRawProduct:e=>G(e)}),(0,s.jsx)(y,{colorCodeModal:M,setColorCodeModal:P,handleAddNewCode:e=>K(e)})]})})]})};var k=_},52481:function(e,t,l){"use strict";var s,a;l.d(t,{q:function(){return s}}),(a=s||(s={})).VENDOR="vendor",a.PURCHASE_REQUISITION="purchase-requisition",a.LOCAL_PURCHASE_ORDER="local-purchase-order",a.GOOD_RECEIVE_NOTE="good-receive-note",a.VENDOR_BILL="vendor-bill",a.PRODUCTION="production",a.PRODUCT_ASSEMBLY="product-assembly",a.EMPLOYEE="employee",a.CUSTOMER="customer",a.RAW_MATERIAL="raw-material"}},function(e){e.O(0,[100,9443,546,2776,9774,2888,179],function(){return e(e.s=7955)}),_N_E=e.O()}]);