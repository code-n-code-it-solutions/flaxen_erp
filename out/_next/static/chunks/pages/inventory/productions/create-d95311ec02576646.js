(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2926],{61844:function(t,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/inventory/productions/create",function(){return s(1131)}])},1131:function(t,e,s){"use strict";s.r(e);var i=s(85893),n=s(67294),r=s(84800),a=s(41664),l=s.n(a),d=s(5152),o=s.n(d),c=s(9473),u=s(11163),h=s(94300),m=s(8303),x=s(63549),p=s(75694),f=s(8977),_=s(472),j=s(76649),b=s(52481);let v=o()(()=>Promise.resolve().then(s.bind(s,49443)),{loadableGenerated:{webpack:()=>[49443]},ssr:!1}),y=()=>{let t=(0,c.I0)(),e=(0,u.useRouter)(),{token:s}=(0,c.v9)(t=>t.user),{code:a}=(0,c.v9)(t=>t.util),{allProductAssemblies:d,assemblyItems:o}=(0,c.v9)(t=>t.productAssembly),{production:y,success:N}=(0,c.v9)(t=>t.production),[C,w]=(0,n.useState)(""),[E,q]=(0,n.useState)(0),[k,S]=(0,n.useState)(""),[g,O]=(0,n.useState)(!1),[R,L]=(0,n.useState)({}),[F,P]=(0,n.useState)([]),[Q,A]=(0,n.useState)([]),[I,T]=(0,n.useState)(0),[B,D]=(0,n.useState)(0),M=t=>{P(e=>{let s=e.find(e=>e.id===t.id);return s?e.map(e=>e.id===t.id?t:e):[...e,t]}),L({}),O(!1)},U=t=>{P(F.filter(e=>e.id!==t))},G=e=>{e.preventDefault();let i=F.map(t=>({raw_product_id:t.raw_product_id,unit_id:t.unit_id,quantity:t.quantity,unit_cost:t.unit_cost,available_quantity:t.availableQuantity,required_quantity:t.requiredQuantity,total_cost:t.totalCost})),n={batch_number:C,no_of_quantity:E,product_assembly_id:parseInt(k),production_items:i};(0,m.uB)(s),(0,m.OG)("application/json"),t((0,p.f0)()),t((0,f.mf)(n))},H=e=>{E>0?e&&void 0!==e?(S(e?e.value:""),(0,m.uB)(s),t((0,p.f0)()),t((0,p.K6)(e.value))):(S(""),P([])):alert("No of Quantity is required")};return(0,n.useEffect)(()=>{(0,m.uB)(s),t((0,h.Iw)("Create Productions")),t((0,p.vq)()),O(!1)},[]),(0,n.useEffect)(()=>{y&&N&&(t((0,f.PV)()),e.push("/inventory/productions"))},[y,N]),(0,n.useEffect)(()=>{d&&A([{value:"",label:"Select Formula"},...d.map(t=>({value:t.id,label:t.formula_name+" ("+t.formula_code+")"}))])},[d]),(0,n.useEffect)(()=>{o&&P(o.map(t=>({id:performance.now()+(0,_.X)(1e3,9999),raw_product_id:t.raw_product_id,raw_product_title:t.product.title,unit_id:t.unit_id,unit_title:t.unit.name,unit_cost:parseFloat(t.cost),quantity:parseFloat(t.quantity),availableQuantity:parseFloat(t.available_stock),requiredQuantity:t.quantity*E,totalCost:t.product.opening_stock_unit_balance*t.quantity*E})))},[o]),(0,n.useEffect)(()=>{t((0,j.ge)()),t((0,j.bB)(b.q.PRODUCTION))},[]),(0,n.useEffect)(()=>{a&&w(a)},[a]),(0,i.jsxs)("div",{children:[(0,i.jsx)(r.Z,{items:[{title:"Home",href:"/main"},{title:"All Productions",href:"/inventory/productions"},{title:"Create New",href:"#"}]}),(0,i.jsx)("div",{className:"pt-5",children:(0,i.jsxs)("div",{className:"panel",children:[(0,i.jsxs)("div",{className:"mb-5 flex items-center justify-between",children:[(0,i.jsx)("h5",{className:"text-lg font-semibold dark:text-white-light",children:"Enter Details of Productions"}),(0,i.jsx)(l(),{href:"/inventory/productions",className:"btn btn-primary btn-sm m-1",children:(0,i.jsxs)("span",{className:"flex items-center",children:[(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ltr:mr-2 rtl:ml-2",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,i.jsx)("path",{d:"M15 5L9 12L15 19",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]})})]}),(0,i.jsxs)("form",{className:"space-y-5",onSubmit:G,children:[(0,i.jsxs)("div",{className:"flex justify-start flex-col items-start space-y-3 w-full md:w-1/2",children:[(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)("label",{htmlFor:"production_name",children:"Batch Number"}),(0,i.jsx)("input",{id:"batch_number",type:"text",name:"batch_number",placeholder:"Enter Batch Number",value:C,disabled:!0,onChange:t=>w(t.target.value),className:"form-input"})]}),(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)("label",{htmlFor:"no_of_quantity",children:"No of Quantity (KG)"}),(0,i.jsx)("input",{id:"no_of_quantity",type:"number",name:"no_of_quantity",placeholder:"Enter No of Quantity",value:E,onChange:t=>q(parseInt(t.target.value)||0),className:"form-input"})]}),(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)("label",{htmlFor:"product_assembly_id",children:"Formulas"}),(0,i.jsx)(v,{defaultValue:Q[0],options:Q,isSearchable:!0,isClearable:!0,placeholder:"Select Formula",onChange:t=>H(t)})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"flex justify-end items-center mb-3",children:(0,i.jsx)("button",{type:"button",onClick:()=>O(!0),className:"btn btn-primary btn-sm",children:"Add Row"})}),(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Product"}),(0,i.jsx)("th",{children:"Unit"}),(0,i.jsx)("th",{children:"Unit Price (KG)"}),(0,i.jsx)("th",{children:"Qty"}),(0,i.jsx)("th",{children:"Available QTY (KG)"}),(0,i.jsx)("th",{children:"Required QTY (KG)"}),(0,i.jsx)("th",{children:"Cost"}),(0,i.jsx)("th",{children:"Action"})]})}),(0,i.jsxs)("tbody",{children:[F.map(t=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:t.raw_product_title}),(0,i.jsx)("td",{children:t.unit_title}),(0,i.jsx)("td",{children:t.unit_cost.toFixed(2)}),(0,i.jsx)("td",{children:t.quantity}),(0,i.jsx)("td",{children:t.availableQuantity.toFixed(2)}),(0,i.jsx)("td",{children:t.requiredQuantity.toFixed(5)}),(0,i.jsx)("td",{children:t.totalCost.toFixed(2)}),(0,i.jsx)("td",{className:"flex gap-2",children:(0,i.jsx)("span",{onClick:()=>U(t.id),className:"text-danger cursor-pointer",children:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,i.jsx)("path",{d:"M20.5001 6H3.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,i.jsx)("path",{d:"M18.8332 8.5L18.3732 15.3991C18.1962 18.054 18.1077 19.3815 17.2427 20.1907C16.3777 21 15.0473 21 12.3865 21H11.6132C8.95235 21 7.62195 21 6.75694 20.1907C5.89194 19.3815 5.80344 18.054 5.62644 15.3991L5.1665 8.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,i.jsx)("path",{d:"M6.5 6C6.55588 6 6.58382 6 6.60915 5.99936C7.43259 5.97849 8.15902 5.45491 8.43922 4.68032C8.44784 4.65649 8.45667 4.62999 8.47434 4.57697L8.57143 4.28571C8.65431 4.03708 8.69575 3.91276 8.75071 3.8072C8.97001 3.38607 9.37574 3.09364 9.84461 3.01877C9.96213 3 10.0932 3 10.3553 3H13.6447C13.9068 3 14.0379 3 14.1554 3.01877C14.6243 3.09364 15.03 3.38607 15.2493 3.8072C15.3043 3.91276 15.3457 4.03708 15.4286 4.28571L15.5257 4.57697C15.5433 4.62992 15.5522 4.65651 15.5608 4.68032C15.841 5.45491 16.5674 5.97849 17.3909 5.99936C17.4162 6 17.4441 6 17.5 6",stroke:"currentColor",strokeWidth:"1.5"})]})})})]},t.id)),0===F.length?(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:8,className:"text-center",children:"No Item Added"})}):(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{colSpan:2,className:"font-bold text-center",children:"Total"}),(0,i.jsx)("td",{className:"text-left font-bold",children:F.reduce((t,e)=>t+e.unit_cost,0)}),(0,i.jsx)("td",{className:"text-left font-bold",children:F.reduce((t,e)=>t+e.quantity,0).toFixed(2)}),(0,i.jsx)("td",{className:"text-left font-bold",children:F.reduce((t,e)=>t+e.availableQuantity,0)}),(0,i.jsx)("td",{className:"text-left font-bold",children:F.reduce((t,e)=>t+e.requiredQuantity,0)}),(0,i.jsx)("td",{className:"text-left font-bold",children:F.reduce((t,e)=>t+e.totalCost,0).toFixed(2)}),(0,i.jsx)("td",{})]})]})]})]}),(0,i.jsx)("button",{type:"submit",className:"btn btn-primary !mt-6",children:"Submit"})]}),(0,i.jsx)(x.Z,{modal:g,setModal:O,modalFormData:R,handleAddRawProduct:t=>M(t)})]})})]})};e.default=y},52481:function(t,e,s){"use strict";var i,n;s.d(e,{q:function(){return i}}),(n=i||(i={})).VENDOR="vendor",n.PURCHASE_REQUISITION="purchase-requisition",n.LOCAL_PURCHASE_ORDER="local-purchase-order",n.GOOD_RECEIVE_NOTE="good-receive-note",n.VENDOR_BILL="vendor-bill",n.PRODUCTION="production",n.PRODUCT_ASSEMBLY="product-assembly",n.EMPLOYEE="employee",n.CUSTOMER="customer",n.RAW_MATERIAL="raw-material"}},function(t){t.O(0,[100,9443,546,2776,9774,2888,179],function(){return t(t.s=61844)}),_N_E=t.O()}]);